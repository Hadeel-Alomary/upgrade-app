<div bsModal #signupModal="bs-modal" class="modal fade signup centered" tabindex="-1" role="dialog" [config]="{backdrop:'static'}" (onHidden)="onHidden()">

  <div *ngIf="formFields" class="modal-dialog">

    <div class="modal-content">

      <div class="modal-header">
        <button type="button" class="close" (click)="onCancel()"><span>&times;</span></button>
        <h5 class="modal-title" i18n="@@signup_header">تسجيل حساب جديد</h5>
      </div>

      <form #signupForm="ngForm" [hidden]="currentStep !== formSteps.FILL_DETAILS" class="form-horizontal signup-form" (ngSubmit)="onSubmit()">
        <div class="modal-body compact" [loading-mask-directive]="requestSubscription">

          <div class="form-group form-label">
            <label class="col-sm-12" i18n="@@signup_accountTitle">الرجاء اختيار معلومات الدخول للحساب</label>
          </div>

          <div class="form-group" >
            <label class="col-sm-3 col-xs-4 control-label" i18n="@@signup_username">اسم المستخدم</label>

            <div class="col-sm-9 col-xs-8">
              <input class="form-control" type="text" name="username"  i18n-placeholder="@@signup_username" placeholder="اسم المستخدم" [(ngModel)]="formFields.username" (input)="onInputUsername()" requiredInputValidator alphanumericValidator minLengthValidator [minLength]="'4'"  [usernameNotExistValid]="!usernameExists" usernameExistValidator/>
            </div>
          </div>

          <div class="form-group" >
            <label class="col-sm-3 col-xs-4 control-label" i18n="@@signup_password">كلمة السر</label>

            <div class="col-sm-9 col-xs-8">
              <password-field-wrapper>
                <input class="form-control" type="password" name="password"  i18n-placeholder="@@signup_password" placeholder="كلمة السر" [(ngModel)]="formFields.password" requiredInputValidator alphanumericValidator [allowDash]="true" minLengthValidator [minLength]="'5'" />
              </password-field-wrapper>
            </div>
          </div>

          <div class="form-group" >
            <label class="col-sm-3 col-xs-4 control-label" i18n="@@signup_passwordConfirmation">تأكيد كلمة السر</label>

            <div class="col-sm-9 col-xs-8">
              <password-field-wrapper>
                <input class="form-control" type="password" name="passwordConfirmation"  i18n-placeholder="@@signup_passwordConfirmation" placeholder="تأكيد كلمة السر" [(ngModel)]="formFields.passwordConfirmation" requiredInputValidator  matchTextValidator [matchingText]="formFields.password"/>
              </password-field-wrapper>
            </div>
          </div>

          <div class="form-group form-label">
            <label class="col-sm-12" i18n="@@signup_personalTitle">الرجاء ادخال معلوماتك الشخصية</label>
          </div>

          <div class="form-group" >
            <label class="col-sm-3 col-xs-4 control-label" i18n="@@signup_name">الاسم الكامل</label>

            <div class="col-sm-9 col-xs-8">
              <input class="form-control" type="text" name="name"  i18n-placeholder="@@signup_name" placeholder="الاسم الكامل" [(ngModel)]="formFields.name" requiredInputValidator/>
            </div>
          </div>


          <div class="form-group">
            <label class="col-sm-3 col-xs-4 control-label" i18n="@@signup_email">البريد الالكتروني</label>
            <div class="col-sm-9 col-xs-8">
              <input class="form-control" type="text" name="email" i18n-placeholder="@@signup_email" placeholder="البريد الالكتروني" [(ngModel)]="formFields.email" (input)="onInputEmail()" requiredInputValidator emailValidator  [emailNotExistValid]="!emailExists" emailExistValidator />
            </div>
          </div>


          <div class="form-group">
            <label class="col-sm-3 col-xs-4 control-label" i18n="@@signup_mobile">رقم الجوال</label>
            <div class="col-sm-5 col-xs-4">
              <select class="form-control" [(ngModel)]="formFields.countryCode" name="countryCode" requiredInputValidator>
                <option *ngFor="let country of countries" value="{{country.code}}">{{getCountryDropdownName(country)}}</option>
              </select>
            </div>
            <div class="col-sm-4 col-xs-4">
              <input class="form-control" type="text" name="mobile" i18n-placeholder="@@signup_mobile" placeholder="الجوال" [(ngModel)]="formFields.mobile" leading-zero-trimmer (input)="onInputMobile()" requiredInputValidator integerValueValidator phoneNumberValidator [countryCode]="formFields.countryCode" [mobileNotExistValid]="!mobileExists" mobileExistValidator/>
            </div>
          </div>
            <div class="form-group">
                <label class="col-sm-3"></label>
                <div class="col-sm-6 col-xs-8 recaptcha-control">
                    <recaptcha (recaptchaResponse)="onRecaptchaResponse($event)"
                               (recaptchaSuccess)="onRecaptchaSuccess($event)" [resetRecaptcha]="resetRecaptcha"></recaptcha>
                    <div *ngIf="isRecaptchaSuccess === false" class="alert alert-danger tickerchart-validation-error-message" i18n="@@signup_requiredField" >الحقل مطلوب</div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" (click)="onSubmit()" class="btn btn-success" i18n="@@signup_apply">موافق</button>
          <a class="btn btn-default" (click)="onCancel()" i18n="@@signup_cancel">الغاء</a>
        </div>
      </form>

     <form #activationForm="ngForm" [hidden]="currentStep !== formSteps.VERIFY_MOBILE" class="form-horizontal mobile-verification-form">

        <div class="modal-body compact" [loading-mask-directive]="requestSubscription">

          <div class="form-group form-label">
            <div class="alert alert-info mobile-verification-steps" i18n="@@signup_mobileVerificationMessage">لقد قمنا بإرسال رسالة نصية إلى جوالك تحتوي على رمز لتأكيد جوالك. يرجى كتابة الرمز بالأسفل و الضغط على إستمرار.</div>
          </div>

          <div class="form-group form-label">
            <label class="col-sm-12" i18n="@@signup_mobileVerification">تأكيد رقم الجوال</label>
          </div>

          <div class="form-group mobile-confirmation-row" >
            <label class="col-sm-3 col-xs-4" i18n="@@signup_mobile">رقم الجوال</label>
            <div class="col-sm-4 col-xs-4 english mobile">{{getMobileWithCountryCode()}}</div>
            <div class="col-sm-3 col-xs-4 aligned"><a class="btn btn-primary btn-sm" (click)="editMobile()" i18n="@@signup_mobileChange">تعديل رقم الجوال</a></div>
          </div>

          <div class="form-group" >
            <label class="col-sm-3 col-xs-4 control-label" i18n="@@signup_mobileVerificationCode">رمز التفعيل</label>
            <div class="col-sm-7 col-xs-8">
              <input [(ngModel)]="mobileActivationCode" class="form-control verification-code english" type="text" name="verification-code"
                     i18n-placeholder="@@signup_verificationCodeEntry" placeholder="ادخل رمز التفعيل الذي وصلك على الجوال"
                     requiredInputValidator manualErrorValidator [manualError]="mobileVerificationError" (change)="resetMobileVerificationError()"/>
            </div>
          </div>

          <div *ngIf="resendCodeOption" class="form-group form-label">
            <label class="col-sm-3 col-xs-1"></label>
            <div class="col-sm-9 col-xs-11"><a class="resend-code bold-font" (click)="resendVerificationCode()" i18n="@@signup_mobileVerificationCodeResend">لم يصلك رقم التفعيل؟ أضغط هنا لإرساله مرة أخرى.</a></div>
          </div>

        </div>


        <div class="modal-footer">
          <button type="button" class="btn btn-success" i18n="@@signup_confirmMobile" (click)="onActivationCodeSubmit()">تأكيد الجوال</button>
          <a class="btn btn-default" (click)="onCancel()" i18n="@@signup_cancel">الغاء</a>
        </div>

      </form>

      <div class="signup-successful bold-font" [class.hidden]="currentStep !== formSteps.SUCCESS_MESSAGE">
        <div i18n="@@signup_accountSignupSuccess">لقد تم تسجيل الحساب بنجاح</div>
        <div i18n="@@signup_accountSignupRedirect">سوف يتم تحويلك إلى حسابك خلال ثوان ...</div>
      </div>

    </div>
  </div>
</div>
